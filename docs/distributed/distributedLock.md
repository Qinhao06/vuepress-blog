# 分布式锁

**分布式锁**：当多个进程不在同一个系统中(比如分布式系统中控制共享资源访问)，用分布式锁控制多个进程对资源的访问。

### 设计要求

安全有效，也就是需要互斥，无死锁，容错（部分节点 down 时仍能获取和释放锁），非阻塞，高性能

### 实现方案

- 基于数据库：锁表（创建一个表，使用表数据来实现），乐观锁（本质是看是否修改），悲观锁

- 基于 redis：单个Redis实例 setnx(key,当前时间+过期时间) + Lua，Redis集群模式：Redlock

- 基于 zookeeper：使用临时有序节点，Curator

- 基于 Consul 实现分布式锁

  